<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="返回" defaultHref="/saleing/driverecord/list"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <ion-label>试乘试驾明细</ion-label>
    </ion-title>
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>

  <ion-toolbar>
    <ion-segment [(ngModel)]="tab" color="primary">
      <ion-segment-button value="info">
        <ion-label>基础信息</ion-label>
      </ion-segment-button>
      <ion-segment-button value="check">
        <ion-label>附件列表</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div [ngSwitch]="tab">
    <div *ngSwitchCase="'info'">
      <ion-list lines="full">
        <ion-item-divider color="primary">
          <ion-label>
            用户信息 <span [ngStyle]="{'font-size': '0.8rem'}">{{mod.data.detail.statusname}}</span>
          </ion-label>
        </ion-item-divider>
        <ion-item>
          <ion-label>
            <h2>
              姓名
            </h2>
            <p>{{mod.data.detail.mcs_fullname}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              手机号码
            </h2>
            <p>{{mod.data.detail.mcs_mobilephone}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              业务类型
            </h2>
            <p>{{mod.data.detail.mcs_businesstype}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              试驾车型
            </h2>
            <p>{{mod.data.detail.carmodelname}}&nbsp;</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-label>
            <h2>
              日期
            </h2>
            <p>{{mod.data.detail.mcs_ordertime | date:'yyyy-MM-dd HH:mm:ss'}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              时段
            </h2>
            <p>{{mod.data.detail.reservationname}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              试驾车辆
            </h2>
            <p>{{mod.data.detail.testdrivecarname}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item (click)="loadmap()">
          <ion-label>
            <h2>
              试驾路线
            </h2>
            <p>{{mod.data.detail.driveroutename}}&nbsp;</p>
          </ion-label>
          <ion-note slot="end">
            <ion-icon name="return-right" size="large"></ion-icon>
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              试驾开始时间
            </h2>
            <p>{{mod.data.detail.mcs_starton | date:'yyyy-MM-dd HH:mm:ss'}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              试驾结束时间
            </h2>
            <p>{{mod.data.detail.mcs_endon | date:'yyyy-MM-dd HH:mm:ss'}}&nbsp;</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h2>
              取消原因
            </h2>
            <p>{{mod.data.detail.mcs_cancelreason}}&nbsp;</p>
          </ion-label>
        </ion-item>
      </ion-list>

    </div>
    <div *ngSwitchCase="'check'">

      <ion-grid class="ionatt">
        <ion-row *ngIf="mod.data.attachment.length===0">
          <ion-col text-center>
            <ion-label>
              <p>
                当前无附件记录
              </p>
            </ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>




      <ion-list>
        <ion-item *ngFor="let item of mod.data.attachment">
          <ion-icon name="document" size="large" *ngIf="item.mcs_filetype !='png'"></ion-icon>
          <ion-icon name="images" size="large" *ngIf="item.mcs_filetype =='png'"></ion-icon>
          <ion-label>
            <h2>{{item.mcs_filename}}</h2>
          </ion-label>
          <!-- <ion-button *ngIf="item.mcs_filetype !='png' && item.mcs_filetype !='jpg'  " color="primary"
            class="button-outline" (click)="down(item.fileurl)">
            下载 <ion-icon color="primary" name="arrow-down"></ion-icon>
          </ion-button>
          <ion-button *ngIf="item.mcs_filetype =='png' ||   item.mcs_filetype =='jpg' " color="primary"
            class="button-outline" (click)="down(item.fileurl)">
            预览 <ion-icon color="primary"></ion-icon>
          </ion-button> -->
        </ion-item>
      </ion-list>

    </div>
    <!-- <ion-row class="ios hydrated"
      *ngIf="mod.data.detail.mcs_drivestatus == 10||mod.data.detail.mcs_drivestatus == 11 || mod.data.detail.mcs_drivestatus == 12">
      <ion-col offset-4="" class="ios hydrated">
        <section style="text-align:center;">
          <ion-button
            *ngIf="mod.data.detail.mcs_drivestatus == 10||mod.data.detail.mcs_drivestatus == 11 || mod.data.detail.mcs_drivestatus == 12"
            style="width:80%" color="danger" [routerLink]="['/saleing/driverecord/edit']"
            [queryParams]="{actionCode:'4',id:mod.data.detail.id}">预约取消</ion-button>
        </section>
      </ion-col>
      <ion-col class="ios hydrated">
        <section style="text-align:center;">
          <ion-button style="width:80%" color="primary" [routerLink]="['/saleing/driverecord/edit']"
            [queryParams]="{actionCode:'3',id:mod.data.detail.id}"
            *ngIf="mod.data.detail.mcs_drivestatus == 11||mod.data.detail.mcs_drivestatus ==10 ">排程</ion-button>
          <ion-button style="width:80%" color="primary" (click)="beginOnClick(mod.data.detail.id)"
            *ngIf="mod.data.detail.mcs_drivestatus == 12">开始试驾</ion-button>
        </section>
      </ion-col>
    </ion-row> -->
    <!-- <section style="text-align:center;">
      <ion-button *ngIf="mod.data.detail.mcs_drivestatus==14" style="width:80%" color="primary"
        (click)="endOnClick(mod.data.detail.id)">结束试驾
      </ion-button>
    </section> -->
  </div>
  <br />
  <br />
  <br />
  <ion-fab vertical="bottom" horizontal="end" slot="fixed"  *ngIf="mod.data.detail.mcs_drivestatus!=15" >
    <ion-fab-button>
      <ion-icon name="arrow-dropup"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button [routerLink]="['/saleing/driverecord/edit']"
        [queryParams]="{actionCode:'2',id:mod.data.detail.id}"
        *ngIf="mod.data.detail.mcs_drivestatus==10 || mod.data.detail.mcs_drivestatus==11 || mod.data.detail.mcs_drivestatus==12 "
        color="warning">
        <ion-icon name="create"></ion-icon>
      </ion-fab-button>
      <ion-fab-button *ngIf="mod.data.detail.testdrivefeedbackname!=null" color="primary"
        [routerLink]="['/saleing/driverecord/feedback']" [queryParams]="{id:mod.data.detail.id}">
        反馈
      </ion-fab-button>
      <!-- 开始试驾 -->
      <ion-fab-button color="primary" (click)="beginOnClick(mod.data.detail.id)"
        *ngIf="mod.data.detail.mcs_drivestatus == 12">
        <svg t="1576749620406" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="4696" width="32" height="32">
          <path
            d="M511.719619 819.224381c-169.520762 0-306.95619-137.423238-306.95619-306.944 0-169.520762 137.435429-306.95619 306.95619-306.956191s306.95619 137.435429 306.956191 306.956191-137.435429 306.95619-306.956191 306.95619m0-648.009142C323.352381 171.227429 170.666667 323.913143 170.666667 512.280381S323.352381 853.333333 511.719619 853.333333c188.355048 0 341.052952-152.685714 341.052952-341.052952S700.074667 171.227429 511.719619 171.227429"
            fill="#1D1717" p-id="4697"></path>
          <path d="M512 585.142857a54.857143 54.857143 0 1 1 0-109.714286 54.857143 54.857143 0 0 1 0 109.714286"
            fill="#AB9C8F" p-id="4698"></path>
          <path
            d="M729.490286 540.574476c-60.623238 6.290286-106.691048 26.758095-137.264762 61.903238-29.744762 34.230857-43.654095 81.066667-42.349714 139.678476a235.483429 235.483429 0 0 1-75.739429 0c1.29219-58.624-12.617143-105.447619-42.361905-139.678476-30.573714-35.145143-76.641524-55.612952-137.264762-61.903238l-14.165333-1.475047a235.800381 235.800381 0 0 1 2.706286-71.716572v0.012191l8.179809-3.328c74.191238-30.268952 145.578667-45.348571 214.211048-45.348572 2.182095 0 4.36419 0.01219 6.558476 0.048762 2.194286-0.036571 4.388571-0.048762 6.558476-0.048762 68.632381 0 140.01981 15.079619 214.211048 45.348572l8.179809 3.328a235.76381 235.76381 0 0 1 2.694096 71.704381l-14.140953 1.462857zM585.910857 733.244952c0.060952-46.567619 11.312762-82.127238 33.231238-107.337142 23.686095-27.257905 61.037714-43.836952 113.005715-49.249524l4.083809-0.414476h0.012191a233.752381 233.752381 0 0 1-150.332953 157.013333zM287.75619 576.24381h0.012191l4.083809 0.426666c51.968 5.400381 89.319619 21.979429 113.005715 49.237334 21.918476 25.209905 33.158095 60.769524 33.231238 107.337142A233.752381 233.752381 0 0 1 287.75619 576.24381zM512 278.79619c97.950476 0 181.784381 60.379429 216.32 145.92-72.009143-27.294476-141.945905-40.984381-209.749333-40.98438-2.194286 0-4.388571 0.024381-6.570667 0.048761a489.447619 489.447619 0 0 0-6.582857-0.048761c-67.779048 0-137.728 13.689905-209.737143 40.98438 34.535619-85.540571 118.369524-145.92 216.32-145.92zM512 243.809524c-148.114286 0-268.190476 120.07619-268.190476 268.190476s120.07619 268.190476 268.190476 268.190476 268.190476-120.07619 268.190476-268.190476-120.07619-268.190476-268.190476-268.190476z"
            fill="#1D1717" p-id="4699"></path>
        </svg>
      </ion-fab-button>
      <!-- 排程按钮 -->
      <ion-fab-button color="medium" [routerLink]="['/saleing/driverecord/edit']"
        [queryParams]="{actionCode:'3',id:mod.data.detail.id}"
        *ngIf="mod.data.detail.mcs_drivestatus == 11||mod.data.detail.mcs_drivestatus ==10 "><svg t="1576811022059"
          class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1922" width="32"
          height="32">
          <path d="M279.143605 398.391523l98.839099 0 0 74.129324-98.839099 0 0-74.129324Z" p-id="1923"></path>
          <path d="M279.143605 521.940396l98.839099 0 0 74.129324-98.839099 0 0-74.129324Z" p-id="1924"></path>
          <path d="M279.143605 645.48927l98.839099 0 0 74.129324-98.839099 0 0-74.129324Z" p-id="1925"></path>
          <path
            d="M297.847595 288.118c-15.606443 0-28.256554-12.650111-28.256554-28.256554L269.591041 114.375957c0-15.606443 12.651135-28.256554 28.256554-28.256554 15.606443 0 28.256554 12.650111 28.256554 28.256554l0 145.485489C326.104149 275.466865 313.454038 288.118 297.847595 288.118z"
            p-id="1926"></path>
          <path
            d="M501.532601 288.118c-15.606443 0-28.256554-12.650111-28.256554-28.256554L473.276047 114.375957c0-15.606443 12.650111-28.256554 28.256554-28.256554s28.256554 12.650111 28.256554 28.256554l0 145.485489C529.790178 275.466865 517.139044 288.118 501.532601 288.118z"
            p-id="1927"></path>
          <path
            d="M705.21863 288.118c-15.606443 0-28.256554-12.650111-28.256554-28.256554L676.962076 114.375957c0-15.606443 12.650111-28.256554 28.256554-28.256554 15.606443 0 28.256554 12.650111 28.256554 28.256554l0 145.485489C733.475184 275.466865 720.825073 288.118 705.21863 288.118z"
            p-id="1928"></path>
          <path
            d="M549.036521 401.419486l0-3.745301-99.260701 0 0 74.701352 4.532223 0C481.183134 442.699658 512.197498 418.412508 549.036521 401.419486z"
            p-id="1929"></path>
          <path
            d="M420.569638 824.39287 179.983187 824.39287c-19.043728 0-39.245839-15.357779-39.245839-34.404578l0-541.676903c0-19.046798 20.202111-38.925544 39.245839-38.925544l643.09678 0c19.043728 0 34.995025 19.878746 34.995025 38.925544l0 188.897208c17.396205 16.703427 36.839023 36.230156 56.281841 58.081837L914.356834 248.311389c0-50.203402-41.073464-95.207385-91.276866-95.207385L179.983187 153.104003c-50.203402 0-94.504374 45.003983-94.504374 95.207385l0 541.676903c0 50.203402 44.300972 90.686419 94.504374 90.686419l284.798395 0C447.873494 863.278505 433.010995 843.835687 420.569638 824.39287z"
            p-id="1930"></path>
          <path
            d="M674.944116 937.598164c-146.871045 0-266.35637-119.485325-266.35637-266.355347 0-146.864906 119.485325-266.350231 266.35637-266.350231 146.864906 0 266.350231 119.485325 266.350231 266.350231 0 42.692335-10.350742 85.145216-29.930683 122.771161-6.395664 12.301164-21.567201 17.102516-33.873482 10.682293-12.301164-6.401804-17.090237-21.567201-10.682293-33.873482 16.090467-30.930453 24.252357-64.430428 24.252357-99.579973 0-119.166053-96.949053-216.115106-216.115106-216.115106-119.172193 0-216.121246 96.949053-216.121246 216.115106 0 119.172193 96.949053 216.121246 216.121246 216.121246 35.805484 0 71.255881-8.928347 102.529141-25.822109 12.215206-6.592139 27.447119-2.036379 34.039257 10.161431 6.592139 12.209066 2.042519 27.447119-10.161431 34.039257C762.768347 926.58432 719.052706 937.598164 674.944116 937.598164z"
            p-id="1931"></path>
          <path d="M674.942069 690.082908m-36.226063 0a35.401 35.401 0 1 0 72.452125 0 35.401 35.401 0 1 0-72.452125 0Z"
            p-id="1932"></path>
          <path
            d="M674.944116 708.917882c-10.406001 0-18.838044-8.432043-18.838044-18.838044L656.106072 526.210653c0-10.406001 8.432043-18.838044 18.838044-18.838044s18.838044 8.432043 18.838044 18.838044L693.78216 690.079838C693.78216 700.485839 685.350117 708.917882 674.944116 708.917882z"
            p-id="1933"></path>
          <path
            d="M741.919507 794.694477c-5.604648 0-11.147898-2.489704-14.858406-7.248078l-66.963111-85.776595c-6.407943-8.198729-4.948709-20.033265 3.25616-26.436092 8.204869-6.407943 20.045545-4.942569 26.436092 3.25616l66.963111 85.776595c6.407943 8.198729 4.948709 20.033265-3.25616 26.436092C750.056837 793.393855 745.972822 794.694477 741.919507 794.694477z"
            p-id="1934"></path>
        </svg></ion-fab-button>
      <!-- 结束试驾 -->
      <ion-fab-button *ngIf="mod.data.detail.mcs_drivestatus==14" style="width:80%" color="success"
        (click)="endOnClick(mod.data.detail.id)"><svg t="1576750321260" class="icon" viewBox="0 0 1024 1024"
          version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7273" width="32" height="32">
          <path
            d="M670.677667 279.969925a278.234342 278.234342 0 0 0-278.234342-279.696809 198.895509 198.895509 0 0 0-20.840155 0H0.136558v1023.726884h141.128063V557.473034h229.607316a140.39683 140.39683 0 0 0 21.571388 0 278.234342 278.234342 0 0 0 278.234342-277.503109z m-299.80573 133.815729H141.264621V146.519813h229.607316a140.39683 140.39683 0 0 1 128.331477 131.622028 141.859297 141.859297 0 0 1-128.331477 135.643813z"
            fill="#515A6E" p-id="7274"></path>
          <path
            d="M1014.357407 772.45568a75.682666 75.682666 0 0 0-16.81837-19.377688l-50.455111-137.837512a70.929648 70.929648 0 0 0-55.208129-39.852225h-265.803373a69.832798 69.832798 0 0 0-54.842511 39.852225l-50.820728 137.837512a84.091851 84.091851 0 0 0-16.81837 19.377688c-4.387401 9.140419-9.140419 17.183987-9.140419 78.241983s11.699736 80.801301 25.593172 88.113636l11.334119 6.215484v55.573745c0 17.91522 4.021784 23.033855 20.840155 23.033855h36.561674c16.81837 0 27.786873 0 27.786873-17.91522v-54.842512h282.621743v54.842512c0 18.280837 11.334119 17.91522 27.786873 17.91522h36.561674c16.81837 0 21.205771-5.118634 21.205771-23.033855v-55.573745l10.968503-6.215484c14.259053-7.312335 25.958789-28.518106 25.958789-88.113636s-2.924934-69.101565-7.312335-78.241983z m-426.309124-36.561675c1.828084-8.043568 16.087137-69.101565 22.302621-90.307335a47.530177 47.530177 0 0 1 38.755375-27.786873h219.370047a47.16456 47.16456 0 0 1 38.389758 27.786873c6.215485 21.205771 20.474538 82.263767 22.668238 90.307335s-5.849868 8.409185-5.849868 8.409186h-329.05507s-9.506035 1.828084-6.581101-7.312335z m5.484251 149.537249a41.314692 41.314692 0 1 1 40.217842-41.314692 40.949075 40.949075 0 0 1-40.217842 42.411542z m332.345621 0a41.314692 41.314692 0 1 1 40.583458-41.314692 40.949075 40.949075 0 0 1-40.583458 42.411542z"
            fill="#515A6E" p-id="7275"></path>
        </svg>
      </ion-fab-button>
      <!-- 取消按钮 -->
      <ion-fab-button
        *ngIf="mod.data.detail.mcs_drivestatus == 10||mod.data.detail.mcs_drivestatus == 11 || mod.data.detail.mcs_drivestatus == 12"
         color="danger" [routerLink]="['/saleing/driverecord/edit']"
        [queryParams]="{actionCode:'4',id:mod.data.detail.id}"><svg t="1576811087069" class="icon"
          viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2752" width="32" height="32">
          <path
            d="M568.568723 511.997178l141.416163-141.418985c15.621028-15.62385 15.621028-40.947695 0-56.568723-15.618206-15.621028-40.944873-15.621028-56.565901 0l-141.418985 141.418985-141.421807-141.421807c-15.62385-15.621028-40.947695-15.621028-56.568723 0s-15.621028 40.947695 0 56.568723l141.421807 141.421807-141.421807 141.421807c-15.621028 15.621028-15.621028 40.947695 0 56.565901 15.62385 15.621028 40.950517 15.621028 56.568723 0l141.421807-141.418985 141.418985 141.418985c15.621028 15.621028 40.947695 15.621028 56.565901 0.002822 15.621028-15.62385 15.621028-40.95334 0-56.574367l-141.416163-141.416163z"
            p-id="2753"></path>
          <path
            d="M512 51.999537c-254.054074 0-460.000463 205.949211-460.000463 460.000463 0 254.054074 205.949211 460.000463 460.000463 460.000463 254.051252 0 460.000463-205.949211 460.000463-460.000463 0-254.051252-205.949211-460.000463-460.000463-460.000463z m0 840.002073c-209.869285 0-380.00161-170.129503-380.00161-380.00161 0-209.866462 170.132325-380.00161 380.00161-380.00161s379.998787 170.132325 379.998787 380.00161c0 209.869285-170.129503 380.00161-379.998787 380.00161z"
            p-id="2754"></path>
        </svg>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>


</ion-content>