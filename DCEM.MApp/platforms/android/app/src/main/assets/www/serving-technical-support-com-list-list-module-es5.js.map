{"version":3,"sources":["./src/app/serving/technical-support.com/list/list.page.html","./src/app/serving/technical-support.com/list/list.module.ts","./src/app/serving/technical-support.com/list/list.page.scss","./src/app/serving/technical-support.com/list/list.page.ts"],"names":[],"mappings":"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","file":"serving-technical-support-com-list-list-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button text=\\\"返回\\\" defaultHref=\\\"/\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>技术支持</ion-title>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n      <ion-searchbar [(ngModel)]=\\\"this.model.seachkey\\\" placeholder=\\\"支持项目名称和编号模糊查找\\\" (keyup)=\\\"search($event)\\\" ></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n      <ion-segment>\\r\\n        <ion-segment-button checked (click)=\\\"selectTab(0)\\\">\\r\\n            <ion-label>全部</ion-label>\\r\\n        </ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"selectTab(10)\\\">\\r\\n            <ion-label>未处理</ion-label>\\r\\n        </ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"selectTab(30)\\\">\\r\\n            <ion-label>处理中</ion-label>\\r\\n        </ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"selectTab(40)\\\">\\r\\n            <ion-label>已关闭</ion-label>\\r\\n        </ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"selectTab(50)\\\">\\r\\n            <ion-label>已取消</ion-label>\\r\\n        </ion-segment-button>\\r\\n      </ion-segment>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n        <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"下拉刷新\\\" refreshingSpinner=\\\"circles\\\" refreshingText=\\\"刷新中...\\\">\\r\\n        </ion-refresher-content> \\r\\n    </ion-refresher>\\r\\n    <ion-list lines=\\\"full\\\">\\r\\n        <ion-item *ngFor=\\\"let item of model.data\\\" [routerLink]=\\\"['/serving/ts/detail']\\\" [queryParams]=\\\"{id:item.Id}\\\">\\r\\n            <ion-icon slot=\\\"start\\\" color=\\\"primary\\\" name=\\\"hammer\\\" size=\\\"large\\\"></ion-icon>\\r\\n            <ion-label>\\r\\n                <h2>{{item.mcs_name}}</h2>\\r\\n                <p>施工项目：{{item.mcs_title}}</p>\\r\\n                <p>施工日期：{{FormatToDateTime(item.mcs_repairdate)}}</p>\\r\\n                <p *ngIf=\\\"item.mcs_orderstatus==10\\\">施工状态：未处理</p>\\r\\n                <p *ngIf=\\\"item.mcs_orderstatus==30\\\">施工状态：处理中</p>\\r\\n                <p *ngIf=\\\"item.mcs_orderstatus==40\\\">施工状态：已关闭</p>\\r\\n                <p *ngIf=\\\"item.mcs_orderstatus==50\\\">施工状态：已取消</p>\\r\\n            </ion-label>\\r\\n        </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-row *ngIf=\\\"model.isending\\\">\\r\\n        <ion-col class=\\\"nodata\\\" text-center>\\r\\n            没有更多内容啦\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row *ngIf=\\\"this.model.nodata\\\">\\r\\n        <ion-col class=\\\"nodata\\\" text-center>\\r\\n            没有查询到数据\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n    \\r\\n    <ion-infinite-scroll #myInfiniteScroll threshold=\\\"100px\\\" (ionInfinite)=\\\"doLoading($event)\\\"> \\r\\n        <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"加载更多...\\\"> \\r\\n        </ion-infinite-scroll-content>\\r\\n    </ion-infinite-scroll>\\r\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n        <ion-fab-button [routerLink]=\\\"['/serving/ts/edit']\\\">\\r\\n            <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n        </ion-fab-button>\\r\\n    </ion-fab>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ListPage } from './list.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ListPage]\r\n})\r\nexport class ListPageModule {}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NlcnZpbmcvdGVjaG5pY2FsLXN1cHBvcnQuY29tL2xpc3QvbGlzdC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { HttpService } from '../../../base/base.ser/http-service.service';\r\nimport { Dcem } from 'app/base/base.ser/Dcem.core';\r\nimport sd from 'silly-datetime';\r\nimport { debug } from 'util';\r\n\r\n@Component({\r\n  selector: 'app-list',\r\n  templateUrl: './list.page.html',\r\n  styleUrls: ['./list.page.scss'],\r\n})\r\nexport class ListPage implements OnInit {\r\n\r\n  private model:any = {\r\n    name:'technicalsupportlist',//模块实体名称\r\n    apiUrl: '/api/tech-support/GetList',//请求地址\r\n    seachkey:'',//搜索关键字\r\n    orderstatus:0,//订单状态\r\n    data: [],//列表数据\r\n    pageSize:10,//页数\r\n    page:1,//分页\r\n    sort:'mcs_supportorderid desc',//排序的参数\r\n    isending:false,//是否加载完成\r\n    nodata:false\r\n  };\r\n\r\n  constructor(\r\n      private _http: Dcem.Core.Http,\r\n      private _page: Dcem.Core.Page,\r\n      private httpService:HttpService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.model.page=1;\r\n    var cachedata=this.httpService.GetDataCache(this.model.name);\r\n    if(cachedata==\"\"){\r\n      this.getList(null);\r\n    }\r\n    else{\r\n      this.model.data=JSON.parse(cachedata);\r\n    }\r\n  }\r\n\r\n  //搜索方法\r\n  search(event){\r\n   var keyCode= event?event.keyCode:\"\";\r\n   if(keyCode==13){\r\n    this.model.data=[];\r\n    this.model.page=1;\r\n    this.model.isending=false;\r\n    this.getList(null);\r\n   }\r\n  }\r\n\r\n  //下拉刷新\r\n  doRefresh(event){\r\n    this.model.data=[];\r\n    this.model.page=1;\r\n    this.model.isending=false;\r\n    this.getList(event);\r\n  }\r\n  //加载下一页\r\n  doLoading(event){\r\n    this.model.page++;\r\n    this.getList(event);\r\n  }\r\n  //切换tab\r\n  selectTab(status){\r\n    this.model.data=[];\r\n    this.model.page=1;\r\n    this.model.isending=false;\r\n    if(status!=\"\" && status!=undefined){\r\n      this.model.orderstatus=status;\r\n    }\r\n    else{\r\n      this.model.orderstatus=0;\r\n    }\r\n    this.getList(null);\r\n  }\r\n  //获取列表数据\r\n  getList(event){\r\n    this._page.loadingShow();\r\n      this._http.get(this.model.apiUrl,\r\n        {\r\n          params:{\r\n            orderstatus:this.model.orderstatus,\r\n            seachkey: this.model.seachkey,\r\n            sort: this.model.sort,\r\n            pageSize: this.model.pageSize,\r\n            page: this.model.page\r\n          }\r\n        },\r\n        (res: any) => {\r\n          if (res.Results !== null) {\r\n            //绑定数据\r\n            res.Results.forEach(item => {\r\n              var value = item[\"Attributes\"];\r\n              this.model.data.push({\r\n                \"Id\": value.mcs_supportorderid,\r\n                \"mcs_name\": value.mcs_name,\r\n                \"mcs_repairdate\": value.mcs_repairdate,\r\n                \"mcs_orderstatus\": value.mcs_orderstatus,\r\n                \"mcs_title\": value.mcs_title\r\n              });\r\n            });\r\n            //设置数据存储到本地\r\n            if (this.model.page == 1) {\r\n              this.httpService.SetDataCache(this.model.name, JSON.stringify(this.model.data).toString());\r\n            }\r\n            event?event.target.complete():'';\r\n            //判断是否有新数据\r\n            if (res.Results.length < 2) {\r\n              event ? event.target.disabled = true : \"\";\r\n              this.model.isending = true;\r\n            }\r\n            this._page.loadingHide();\r\n            if(this.model.data.length==0){\r\n              this.model.nodata=true;\r\n            }\r\n            else{\r\n              this.model.nodata=false;\r\n            }\r\n          }\r\n          else {\r\n            this._page.alert(\"消息提示\", \"数据加载异常\");\r\n            this._page.loadingHide();\r\n          }\r\n        },\r\n        (err: any) => {\r\n          this._page.alert(\"消息提示\", \"数据加载异常\");\r\n          this._page.loadingHide();\r\n        }\r\n      );\r\n  }\r\n\r\n  FormatToDate(date){\r\n    if(date!=null && date!=undefined){\r\n      return sd.format(date, 'YYYY-MM-DD');\r\n    }\r\n    else{\r\n      return '';\r\n    }\r\n  }\r\n\r\n  FormatToDateTime(date){\r\n    if(date!=null && date!=undefined){\r\n      return sd.format(date, 'YYYY-MM-DD hh:mm:ss');\r\n    }\r\n    else{\r\n      return '';\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}