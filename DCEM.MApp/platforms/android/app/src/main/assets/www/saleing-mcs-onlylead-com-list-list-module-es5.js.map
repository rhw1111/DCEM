{"version":3,"sources":["./src/app/saleing/mcs-onlylead.com/list/list.page.html","./src/app/saleing/mcs-onlylead.com/list/list.module.ts","./src/app/saleing/mcs-onlylead.com/list/list.page.scss","./src/app/saleing/mcs-onlylead.com/list/list.page.ts"],"names":[],"mappings":"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","file":"saleing-mcs-onlylead-com-list-list-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button text=\\\"返回\\\" defaultHref=\\\"/serving/home/tabs\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>唯一线索</ion-title>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-menu-button></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n    <ion-toolbar>\\r\\n        <ion-searchbar [(ngModel)]=\\\"this.model.seachkey\\\" placeholder=\\\"请输入姓名\\\\手机号\\\" (keyup)=\\\"search($event)\\\"></ion-searchbar>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n        <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"下拉刷新\\\" refreshingSpinner=\\\"circles\\\" refreshingText=\\\"刷新中...\\\">\\r\\n        </ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n    <ion-list lines=\\\"full\\\">\\r\\n        <ion-item-sliding *ngFor=\\\"let item of model.data;let key=index\\\">\\r\\n            <ion-item [routerLink]=\\\"['/saleing/onlylead/detail']\\\" [queryParams]=\\\"{id:item.mcs_onlyleadid}\\\">\\r\\n                <ion-icon *ngIf=\\\"item.mcs_gender===1\\\" slot=\\\"start\\\" color=\\\"primary\\\" name=\\\"contact\\\" size=\\\"large\\\" style=\\\"width:60px;height:60px\\\"></ion-icon>\\r\\n                <ion-icon *ngIf=\\\"item.mcs_gender===2\\\" slot=\\\"start\\\" color=\\\"danger\\\" name=\\\"contact\\\" size=\\\"large\\\" style=\\\"width:60px;height:60px\\\"></ion-icon>\\r\\n                <ion-icon *ngIf=\\\"item.mcs_gender===3\\\" slot=\\\"start\\\" color=\\\"medium\\\" name=\\\"contact\\\" size=\\\"large\\\" style=\\\"width:60px;height:60px\\\"></ion-icon>\\r\\n                <ion-icon *ngIf=\\\"!item.mcs_gender\\\" slot=\\\"start\\\" color=\\\"medium\\\" name=\\\"contact\\\" size=\\\"large\\\" style=\\\"width:60px;height:60px\\\"></ion-icon>\\r\\n                <ion-label>\\r\\n                    <h2>{{item.mcs_name}}</h2>\\r\\n                    <p *ngIf=\\\"item.mcs_gender==1\\\">先生</p>\\r\\n                    <p *ngIf=\\\"item.mcs_gender==2\\\">女士</p>\\r\\n                    <p *ngIf=\\\"item.mcs_gender==3\\\">未知</p>\\r\\n                    <p *ngIf=\\\"!item.mcs_gender\\\">--</p>\\r\\n\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==1\\\">WEB官网</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==2\\\">Event-Online</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==3\\\">Event-OffLine</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==4\\\">Store展厅</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==5\\\">400电话</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==6\\\">APP</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==7\\\">小程序</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==8\\\">车机</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==9\\\">H5落地页</p>\\r\\n                    <p *ngIf=\\\"item.mcs_leadorigin==10\\\">3D展厅</p>\\r\\n                    <p *ngIf=\\\"!item.mcs_leadorigin\\\">--</p>\\r\\n                </ion-label>\\r\\n                <ion-icon *ngIf=\\\"item.mcs_mobilephone\\\" name=\\\"phone-portrait\\\" size=\\\"small\\\"></ion-icon>\\r\\n                <ion-note slot=\\\"end\\\">\\r\\n                    {{item.mcs_mobilephone}}\\r\\n                </ion-note>\\r\\n            </ion-item>\\r\\n            <ion-item-options side=\\\"end\\\">\\r\\n                <ion-item-option color=\\\"tertiary\\\" expandable [routerLink]=\\\"['/saleing/contactrecord/edit']\\\" [queryParams]=\\\"{id:item.mcs_onlyleadid}\\\">\\r\\n                    联络\\r\\n                </ion-item-option>\\r\\n                <ion-item-option color=\\\"primary\\\" [routerLink]=\\\"['/saleing/cultivatetask/edit']\\\" [queryParams]=\\\"{id:item.mcs_onlyleadid}\\\">\\r\\n                    培育\\r\\n                </ion-item-option>\\r\\n            </ion-item-options>\\r\\n        </ion-item-sliding>\\r\\n    </ion-list>\\r\\n    <ion-row *ngIf=\\\"this.model.isending\\\">\\r\\n        <ion-col class=\\\"nodata\\\" text-center>\\r\\n            没有更多内容啦\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-infinite-scroll #myInfiniteScroll threshold=\\\"100px\\\" (ionInfinite)=\\\"doLoading($event)\\\">\\r\\n        <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"加载更多...\\\">\\r\\n        </ion-infinite-scroll-content>\\r\\n    </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NhbGVpbmcvbWNzLW9ubHlsZWFkLmNvbS9saXN0L2xpc3QucGFnZS5zY3NzIn0= */\"","import { Component, OnInit,ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { HttpService } from '../../../base/base.ser/http-service.service';\r\nimport { DCore_Page, DCore_Http } from 'app/base/base.ser/Dcem.core';\r\nimport sd from 'silly-datetime';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\nimport { Storage_LoginInfo } from 'app/base/base.ser/logininfo.storage';\r\n\r\n@Component({\r\n  selector: 'app-list',\r\n  templateUrl: './list.page.html',\r\n  styleUrls: ['./list.page.scss'],\r\n})\r\nexport class ListPage implements OnInit {\r\n    @ViewChild(IonInfiniteScroll, null) infiniteScroll: IonInfiniteScroll;\r\n\r\n    model = {\r\n        name: 'onlylead',//模块实体名称\r\n        apiUrl: '/api/only-lead/QueryList',\r\n        seachkey: '',//搜索关键字\r\n        data: [],//列表数据\r\n        pageSize: 10,//页数\r\n        page: 1,//分页\r\n        sort: '',//排序的参数\r\n        systemUserId: \"\",//当前用户id\r\n        dealerId: \"\",//当前厅店id\r\n        isending: false,//是否加载完成\r\n        nodata: false\r\n    };\r\n\r\n    constructor(\r\n        public router: Router,\r\n        private _http: DCore_Http,\r\n        private _page: DCore_Page,\r\n        private httpService: HttpService,\r\n        private _logininfo: Storage_LoginInfo\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        //debugger;\r\n        this.model.systemUserId = this._logininfo.GetSystemUserId(); \r\n        //this.model.dealerId = this._logininfo.GetDealerid();\r\n        this.showlist(null);\r\n  }\r\n    //搜索方法\r\n    search(event) {\r\n        var keyCode = event ? event.keyCode : \"\";\r\n        if (keyCode == 13) {\r\n            this.model.data = [];\r\n            this.model.page = 1;\r\n            this.model.isending = false;\r\n            this.showlist(null);\r\n        }\r\n    }\r\n\r\n    //下拉刷新\r\n    doRefresh(event) {\r\n        this.model.data = [];\r\n        this.model.page = 1;\r\n        this.model.isending = false;\r\n        this.showlist(event);\r\n    }\r\n    //加载下一页\r\n    doLoading(event) {\r\n        this.model.page++;\r\n        this.showlist(event);\r\n    }\r\n\r\n    //展示数据\r\n    showlist(event) {\r\n        this._page.loadingShow();\r\n        console.log(\"地址:\" + this.model.apiUrl,\"搜索:\" + this.model.seachkey, \"排序:\" + this.model.sort, \"页条数:\" + this.model.pageSize, \"页数:\" + this.model.page);\r\n        this._http.get(this.model.apiUrl,\r\n            {\r\n                params: {\r\n                    dealerid: this.model.dealerId,\r\n                    systemuserid: this.model.systemUserId,\r\n                    seachkey: this.model.seachkey,\r\n                    pageSize: this.model.pageSize,\r\n                    page: this.model.page\r\n                }\r\n            },\r\n            (res: any) => {\r\n                if (res.Results !== null) {\r\n                    for (var key in res.Results) {\r\n                        var obj = {};\r\n                        obj[\"mcs_onlyleadid\"] = res.Results[key][\"Id\"];\r\n                        obj[\"mcs_gender\"] = res.Results[key][\"Attributes\"][\"mcs_gender\"];\r\n                        obj[\"mcs_leadorigin\"] = res.Results[key][\"Attributes\"][\"mcs_leadorigin\"];\r\n                        obj[\"mcs_mobilephone\"] = res.Results[key][\"Attributes\"][\"mcs_mobilephone\"];\r\n                        obj[\"mcs_name\"] = res.Results[key][\"Attributes\"][\"mcs_name\"];\r\n                        this.model.data.push(obj);\r\n                    }\r\n                    //设置数据存储到本地\r\n                    if (this.model.page == 1) {\r\n                        this.httpService.SetDataCache(this.model.name, JSON.stringify(this.model.data).toString());\r\n                    }\r\n                    event ? event.target.complete() : '';\r\n                    //判断是否有新数据\r\n                    if (res.Results.length < 10) {\r\n                        event ? event.target.disabled = true : \"\";\r\n                        this.model.isending = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._page.alert(\"消息提示\", \"唯一线索数据加载异常\");\r\n                }\r\n                this._page.loadingHide();\r\n            },\r\n            (err: any) => {\r\n                this._page.alert(\"消息提示\", \"唯一线索数据加载异常\");\r\n                this._page.loadingHide();\r\n            }\r\n        );\r\n    }\r\n\r\n    //返回数据为空，默认“--”\r\n    SetDefaultValue(data) {\r\n        if (data == null || data == undefined) {\r\n            return '--';;\r\n        }\r\n        else {\r\n            return data;\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}