{"version":3,"sources":["./src/app/saleing/mcs-account.com/list/list.page.html","./src/app/saleing/mcs-account.com/list/list.module.ts","./src/app/saleing/mcs-account.com/list/list.page.scss","./src/app/saleing/mcs-account.com/list/list.page.ts"],"names":[],"mappings":";;;;;;;;;AAAA,2nCAA2nC,kGAAkG,WAAW,+IAA+I,WAAW,sEAAsE,oBAAoB,mHAAmH,sBAAsB,6FAA6F,yBAAyB,uMAAuM,WAAW,kKAAkK,sBAAsB,4NAA4N,00B;;;;;;;;;;;;;;;;;;;;;;ACAxxE;AACM;AACF;AACU;AAEV;AAEN;AAEvC,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mDAAQ;KACpB;CACF,CAAC;AAWF;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAT1B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,mDAAQ,CAAC;SACzB,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;ACzB3B,+DAA+D,mK;;;;;;;;;;;;;;;;;;;;ACAF;AACE;AACM;AACO;AAO5E;IAkBI,kBAAoB,KAAiB,EACzB,KAAiB,EACjB,SAA0B;QAFlB,UAAK,GAAL,KAAK,CAAY;QACzB,UAAK,GAAL,KAAK,CAAY;QACjB,cAAS,GAAT,SAAS,CAAiB;QAhB/B,QAAG,GAAK,GAAG,CAAC;QACZ,UAAK,GAAQ;YAChB,MAAM,EAAE,sBAAsB;YAC9B,IAAI,EAAE,EAAE;YACR,MAAM,EAAE;gBACJ,SAAS,EAAE,EAAE;gBACb,kBAAkB,EAAE,CAAC,CAAC;gBACtB,QAAQ,EAAE,EAAE;gBACZ,SAAS,EAAE,CAAC;gBACZ,IAAI,EAAE,EAAE;gBACR,MAAM,EAAE,EAAE;gBACV,YAAY,EAAE,EAAE;aACnB;SACJ,CAAC;IAGwC,CAAC;IAE3C,2BAAQ,GAAR;IAEA,CAAC;IAED,QAAQ;IACR,mCAAgB,GAAhB;QACI,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;QAChC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACzB,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,KAAK;IACL,gCAAa,GAAb,UAAc,KAAU;QACpB,IAAI,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QACzC,IAAI,OAAO,IAAI,EAAE,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,KAAK,CAAC;YACxC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;IACL,CAAC;IACA,MAAM;IACN,6BAAU,GAAV;QACG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC;IACD,OAAO;IACP,6BAAU,GAAV,UAAW,MAAM;QACb,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAC,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;QAChC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,kBAAkB,GAAC,MAAM,CAAC;QAE5C,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACzB,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,QAAQ;IACR,6BAAU,GAAV;QAAA,iBAoCC;QAnCG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EACzD,UAAC,GAAQ;YACL,IAAI,GAAG,CAAC,OAAO,KAAK,IAAI,EAAE;gBACtB,MAAM;gBACN,IAAG,GAAG,CAAC,OAAO,CAAC,MAAM,GAAC,CAAC,EAAC;oBACpB,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;wBACpB,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;wBAC/B,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;4BACjB,IAAI,EAAE,KAAK,CAAC,SAAS;4BACrB,MAAM,EAAE,KAAK,CAAC,IAAI;4BAClB,eAAe,EAAE,KAAK,CAAC,aAAa;4BACpC,iBAAiB,EAAE,KAAK,CAAC,eAAe,IAAE,EAAE,EAAC,KAAI,EAAC,MAAK,CAAC,eAAe;4BACvE,oBAAoB,EAAC,KAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,oBAAoB,EAAC,KAAK,CAAC,kBAAkB,CAAC;4BAC1G,WAAW,EAAE,KAAK,CAAC,SAAS;yBAC/B,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;gBACD,KAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;gBAClC,UAAU;gBACV,IAAI,GAAG,CAAC,OAAO,CAAC,MAAM,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE;oBACjD,IAAG,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,GAAC,CAAC,EAAC;wBAC7B,KAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,IAAI,CAAC;qBAC1C;iBACJ;aACJ;iBACI;gBACD,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;aACtC;YACD,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,EACD,UAAC,GAAQ;YACL,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YACnC,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,CACJ,CAAC;IACN,CAAC;;gBAlF0B,sEAAU;gBAClB,sEAAU;gBACP,iFAAgB;;IAlBT;QAA5B,+DAAS,CAAC,yDAAU,EAAE,IAAI,CAAC;wEAAa,yDAAU;gDAAC;IAChB;QAAnC,+DAAS,CAAC,gEAAiB,EAAE,IAAI,CAAC;wEAAoB,gEAAiB;uDAAC;IAHhE,QAAQ;QALpB,+DAAS,CAAC;YACP,QAAQ,EAAE,UAAU;YACpB,4JAA+B;;SAElC,CAAC;+EAmB6B,sEAAU;YAClB,sEAAU;YACP,iFAAgB;OApB7B,QAAQ,CAqGpB;IAAD,eAAC;CAAA;AArGoB","file":"saleing-mcs-account-com-list-list-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button text=\\\"返回\\\" defaultHref=\\\"/\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>销售机会列表</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n        <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-searchbar animated [(ngModel)]=\\\"model.params.SearchKey\\\" placeholder=\\\"请输入编号\\\\姓名\\\\手机号搜索\\\"\\r\\n      (keyup)=\\\"searchOnKeyup($event)\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-segment>\\r\\n      <ion-segment-button value=\\\"0\\\" checked (click)=\\\"tagOnClick(0)\\\">\\r\\n        <ion-label>全部</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button (click)=\\\"tagOnClick(1)\\\">\\r\\n        <ion-label>待指派</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button (click)=\\\"tagOnClick(2)\\\">\\r\\n        <ion-label>已指派</ion-label>\\r\\n      </ion-segment-button>\\r\\n    </ion-segment>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n\\r\\n  <ion-list lines=\\\"full\\\">\\r\\n    <ion-item-sliding *ngFor=\\\"let item of model.data;let key=index\\\">\\r\\n      <ion-item [routerLink]=\\\"['/saleing/account/detail']\\\" [queryParams]=\\\"{id:item.Id}\\\">\\r\\n        <ion-avatar class=\\\"header-ion-avatar\\\" item-start>机</ion-avatar>\\r\\n        <ion-label>\\r\\n          <h2 *ngIf=\\\"item.name\\\">{{item.name}}</h2>\\r\\n          <h2 *ngIf=\\\"!item.name\\\">--</h2>\\r\\n          <p>{{item.accountnumber}}</p>\\r\\n          <p>\\r\\n            <ion-icon name=\\\"phone-portrait\\\" size=\\\"small\\\"></ion-icon>\\r\\n            {{item.mcs_mobilephone}}\\r\\n          </p>\\r\\n        </ion-label>\\r\\n        <ion-note slot=\\\"end\\\">\\r\\n          {{item.mcs_customerstatus}}\\r\\n        </ion-note>\\r\\n      </ion-item>\\r\\n      <ion-item-options side=\\\"end\\\">\\r\\n        <ion-item-option color=\\\"tertiary\\\" [routerLink]=\\\"['/saleing/contactrecord/edit']\\\" [queryParams]=\\\"{id:item.Id}\\\">\\r\\n          联络\\r\\n        </ion-item-option>\\r\\n        <ion-item-option color=\\\"primary\\\" [routerLink]=\\\"['/saleing/cultivatetask/edit']\\\" [queryParams]=\\\"{type:3,sourid:item.Id}\\\">\\r\\n          培育\\r\\n        </ion-item-option>\\r\\n      </ion-item-options>\\r\\n    </ion-item-sliding>\\r\\n  </ion-list>\\r\\n  <ion-label *ngIf=\\\"ionInfiniteScroll.disabled\\\" text-center>\\r\\n    <p style=\\\"height: 30px;\\\">\\r\\n      没有更多的记录显示啦\\r\\n    </p>\\r\\n  </ion-label>\\r\\n  <ion-infinite-scroll (ionInfinite)=\\\"doInfinite()\\\">\\r\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"加载更多...\\\"></ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n\\r\\n  <!-- <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button>\\r\\n      <ion-icon name=\\\"arrow-dropup\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n    <ion-fab-list side=\\\"top\\\">\\r\\n      <ion-fab-button  title=\\\"成交\\\" color=\\\"success\\\">\\r\\n          +试驾\\r\\n        <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n      <ion-fab-button color=\\\"warning\\\" [routerLink]=\\\"['/saleing/account/edit']\\\">\\r\\n        <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab-list>\\r\\n  </ion-fab> -->\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NhbGVpbmcvbWNzLWFjY291bnQuY29tL2xpc3QvbGlzdC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { IonContent, IonInfiniteScroll } from '@ionic/angular';\r\nimport { DCore_Http, DCore_Page } from 'app/base/base.ser/Dcem.core';\r\nimport { OptionSetService } from '../../../base/base.ser/optionset.service';\r\n\r\n@Component({\r\n    selector: 'app-list',\r\n    templateUrl: './list.page.html',\r\n    styleUrls: ['./list.page.scss'],\r\n})\r\nexport class ListPage implements OnInit {\r\n\r\n    @ViewChild(IonContent, null) ionContent: IonContent;\r\n    @ViewChild(IonInfiniteScroll, null) ionInfiniteScroll: IonInfiniteScroll;\r\n    public tab:any=\"1\";\r\n    public model: any = {\r\n        apiUrl: '/api/account/GetList',//请求地址\r\n        data: [],//列表数据\r\n        params: {\r\n            SearchKey: '',//搜索关键字\r\n            mcs_customerstatus: -1,//状态\r\n            PageSize: 10,//页数\r\n            PageIndex: 1,//分页\r\n            Sort: '',//排序的参数\r\n            UserId: \"\",\r\n            mcs_dealerid: \"\"\r\n        }\r\n    };\r\n    constructor(private _http: DCore_Http,\r\n        private _page: DCore_Page,\r\n        private optionset:OptionSetService) { }\r\n\r\n    ngOnInit() {\r\n       \r\n    }\r\n    \r\n    //每次页面加载\r\n    ionViewWillEnter() {\r\n        this.ionInfiniteScroll.disabled = false;\r\n        this.model.params.PageIndex = 1;\r\n        this._page.loadingShow();\r\n        this.listOnBind();\r\n    }\r\n\r\n    ///搜索\r\n    searchOnKeyup(event: any) {\r\n        var keyCode = event ? event.keyCode : \"\";\r\n        if (keyCode == 13) {\r\n            this.model.data = [];\r\n            this.model.params.PageIndex = 1;\r\n            this.ionInfiniteScroll.disabled = false;\r\n            this.ionContent.scrollToTop(0);\r\n            this.listOnBind();\r\n        }\r\n    }\r\n     //下拉刷新\r\n     doInfinite() {\r\n        this.model.params.PageIndex += 1;\r\n        this.listOnBind();\r\n        this.ionContent.scrollToBottom(0);\r\n    }\r\n    //切换tab\r\n    tagOnClick(status){\r\n        this.ionInfiniteScroll.disabled = false;\r\n        this.model.data=[];\r\n        this.model.params.PageIndex = 1;\r\n        this.model.params.mcs_customerstatus=status;\r\n       \r\n        this.ionContent.scrollToTop(0);\r\n        this._page.loadingShow();\r\n        this.listOnBind();\r\n    }\r\n\r\n    //列表数据绑定\r\n    listOnBind() {\r\n        this._http.postForToaken(this.model.apiUrl, this.model.params,\r\n            (res: any) => {\r\n                if (res.Results !== null) {\r\n                    //绑定数据\r\n                    if(res.Results.length>0){\r\n                        res.Results.forEach(item => {\r\n                            var value = item[\"Attributes\"];\r\n                            this.model.data.push({\r\n                                \"Id\": value.accountid,\r\n                                \"name\": value.name,\r\n                                \"accountnumber\": value.accountnumber,\r\n                                \"mcs_mobilephone\": value.mcs_mobilephone==\"\"?\"--\":value.mcs_mobilephone,\r\n                                \"mcs_customerstatus\":this.optionset.GetOptionSetNameByValue(\"mcs_customerstatus\",value.mcs_customerstatus),\r\n                                \"createdon\": value.createdon\r\n                            });\r\n                        });\r\n                    }\r\n                    this.ionInfiniteScroll.complete();\r\n                    //判断是否有新数据\r\n                    if (res.Results.length < this.model.params.PageSize) {\r\n                        if(this.model.params.PageIndex>1){\r\n                            this.ionInfiniteScroll.disabled = true;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this._page.alert(\"消息提示\", \"数据加载异常\");\r\n                }\r\n                this._page.loadingHide();\r\n            },\r\n            (err: any) => {\r\n                this._page.alert(\"消息提示\", \"数据加载异常\");\r\n                this._page.loadingHide();\r\n            }\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}