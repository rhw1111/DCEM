{"version":3,"sources":["./src/app/saleing/mcs-cultivatetask.com/list/list.page.html","./src/app/saleing/mcs-cultivatetask.com/list/list.module.ts","./src/app/saleing/mcs-cultivatetask.com/list/list.page.scss","./src/app/saleing/mcs-cultivatetask.com/list/list.page.ts"],"names":[],"mappings":"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","file":"saleing-mcs-cultivatetask-com-list-list-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button text=\\\"返回\\\" defaultHref=\\\"/\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>我的任务</ion-title>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-menu-button></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n        \\r\\n    </ion-toolbar>\\r\\n    <ion-toolbar>\\r\\n        <ion-searchbar [(ngModel)]=\\\"this.model.seachkey\\\" placeholder=\\\"可根据姓名、手机号模糊查找\\\" (keyup)=\\\"search($event)\\\">\\r\\n        </ion-searchbar>\\r\\n    </ion-toolbar>\\r\\n    <ion-toolbar>\\r\\n        <ion-segment>\\r\\n            <ion-segment-button checked (click)=\\\"selectTab(-1)\\\" value=\\\"0\\\">\\r\\n                <ion-label>全部</ion-label>\\r\\n            </ion-segment-button>\\r\\n\\r\\n            <ion-segment-button (click)=\\\"selectTab(0)\\\">\\r\\n                <ion-label>打开</ion-label>\\r\\n            </ion-segment-button>\\r\\n            <ion-segment-button (click)=\\\"selectTab(1)\\\">\\r\\n                <ion-label>关闭</ion-label>\\r\\n            </ion-segment-button>\\r\\n\\r\\n        </ion-segment>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n    <!-- <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n        <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"下拉刷新\\\" refreshingSpinner=\\\"circles\\\"\\r\\n            refreshingText=\\\"刷新中...\\\">\\r\\n        </ion-refresher-content>\\r\\n    </ion-refresher> -->\\r\\n    <ion-list lines=\\\"full\\\">\\r\\n        <ion-item-sliding *ngFor=\\\"let item of model.datalist\\\" >\\r\\n            <ion-item [routerLink]=\\\"['/saleing/cultivatetask/detail']\\\" [queryParams]=\\\"{id:item.mcs_activityid}\\\">\\r\\n                <ion-icon slot=\\\"start\\\" name=\\\"logo-instagram\\\" size=\\\"large\\\" color=\\\"primary\\\"></ion-icon>\\r\\n                <ion-label>\\r\\n                    <h2>{{item.Custname}}</h2>\\r\\n                    <p>{{item.mcs_name}}</p>\\r\\n                    <p>{{item.mcs_mobilephone}}</p>\\r\\n                    <p>{{item.mcs_importantlevel}}</p>\\r\\n                </ion-label>\\r\\n                <ion-note slot=\\\"end\\\">                   \\r\\n                    <p>{{item.mcs_activitystatus}}</p>\\r\\n                </ion-note>\\r\\n            </ion-item>\\r\\n            <ion-item-options side=\\\"end\\\" *ngIf=\\\"item.mcs_activitystatus=='open'\\\">\\r\\n               <ion-item-option color=\\\"tertiary\\\" expandable [routerLink]=\\\"['/saleing/cultivatetask/edit']\\\" [queryParams]=\\\"{id:item.mcs_activityid}\\\">\\r\\n                 编辑\\r\\n               </ion-item-option> \\r\\n               <ion-item-option color=\\\"primary\\\" expandable (click)=\\\"TaskFinish(item.mcs_activityid)\\\">\\r\\n                 完成\\r\\n               </ion-item-option>                   \\r\\n            </ion-item-options>\\r\\n        </ion-item-sliding>\\r\\n    </ion-list>\\r\\n   \\r\\n        <ion-label *ngIf=\\\"infiniteScroll.disabled && !model.searchnodata\\\"  text-center>\\r\\n            <p>\\r\\n                没有更多的记录显示啦\\r\\n            </p>\\r\\n        </ion-label>\\r\\n        <ion-label *ngIf=\\\"!infiniteScroll.disabled && model.searchnodata\\\"  text-center>\\r\\n            <p>\\r\\n                没有数据！\\r\\n            </p>\\r\\n        </ion-label>\\r\\n\\r\\n    <ion-infinite-scroll #myInfiniteScroll threshold=\\\"100px\\\" (ionInfinite)=\\\"doLoading($event)\\\">\\r\\n        <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"加载更多...\\\">\\r\\n        </ion-infinite-scroll-content>\\r\\n    </ion-infinite-scroll>\\r\\n    \\r\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n            <ion-fab-button [routerLink]=\\\"['/saleing/cultivatetask/edit']\\\" [queryParams]=\\\"\\\">\\r\\n                <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n            </ion-fab-button>\\r\\n    </ion-fab>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NhbGVpbmcvbWNzLWN1bHRpdmF0ZXRhc2suY29tL2xpc3QvbGlzdC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { HttpService } from '../../../base/base.ser/http-service.service';\r\nimport { DCore_Http, DCore_Page } from 'app/base/base.ser/Dcem.core';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\nimport { OptionSetService } from '../../../base/base.ser/optionset.service';\r\nimport { Storage_LoginInfo } from 'app/base/base.ser/logininfo.storage';\r\n@Component({\r\n  selector: 'app-list',\r\n  templateUrl: './list.page.html',\r\n  styleUrls: ['./list.page.scss'],\r\n})\r\nexport class ListPage implements OnInit {\r\n  @ViewChild(IonInfiniteScroll, null) infiniteScroll: IonInfiniteScroll;\r\n\r\n  public model = {\r\n    name: 'activitylist',//模块实体名称\r\n    apiUrl: '/api/only-lead/GetMyActivityList',//列表请求地址\r\n    addoreditUrl: '/api/activity/addoredit',//培育任务完成按钮接口\r\n    seachkey: '',//搜索关键字\r\n    mcs_activitystatus: -1,//任务状态\r\n    pageSize: 10,//页数\r\n    page: 1,//分页\r\n    sort: '',//排序的参数\r\n    isending: false,//是否加载完成\r\n    datalist: [],//列表数据\r\n    systemUserId:'',\r\n    searchnodata:false,\r\n  };\r\n\r\n  constructor(\r\n    private _http: DCore_Http,\r\n    private _page: DCore_Page,\r\n    private httpService: HttpService,\r\n    private optionset: OptionSetService,\r\n    private _logininfo: Storage_LoginInfo\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.model.page = 1;\r\n    this.model.systemUserId = this._logininfo.GetSystemUserId(); \r\n    this._page.loadingShow();\r\n    this.getList(null);\r\n  }\r\n\r\n\r\n  //搜索方法\r\n  search(event) {\r\n    var keyCode = event ? event.keyCode : \"\";\r\n    if (keyCode == 13) {\r\n      this.model.searchnodata=false;\r\n      this.model.datalist = [];\r\n      this.model.page = 1;\r\n      this._page.loadingShow();\r\n      this.getList(null);\r\n    }\r\n  }\r\n\r\n  //下拉刷新\r\n  doRefresh(event) {\r\n    //debugger;\r\n    this.model.datalist = [];\r\n    this.model.page = 1;\r\n    this.model.isending = false;\r\n    this.getList(event);\r\n  }\r\n  //加载下一页\r\n  doLoading(event) {\r\n    this.model.page++;\r\n    this.getList(event);\r\n  }\r\n  //切换tab\r\n  selectTab(status) {\r\n    this.infiniteScroll.disabled = false;//切换标签初始化下拉控件事件\r\n    this.model.datalist = [];\r\n    this.model.page = 1;\r\n    this.model.isending = false;\r\n    if (status.toString() != \"\" && status != undefined) {\r\n      this.model.mcs_activitystatus = status;\r\n    }\r\n    else {\r\n      this.model.mcs_activitystatus = -1;\r\n    }\r\n    this._page.loadingShow();\r\n    this.getList(null);\r\n  }\r\n\r\n  //获取列表数据\r\n  getList(event) {\r\n    this._http.get(this.model.apiUrl,\r\n      {\r\n        params: {\r\n          mcs_activitystatus: this.model.mcs_activitystatus,\r\n          seachkey: this.model.seachkey,\r\n          sort: this.model.sort,\r\n          pageSize: this.model.pageSize,\r\n          page: this.model.page,\r\n          systemuserid: this.model.systemUserId\r\n        }\r\n      },\r\n      (res: any) => {\r\n        //debugger;\r\n        if (res.Results !== null) {\r\n          //绑定数据\r\n          res.Results.forEach(item => {\r\n            var obj = {};\r\n            obj[\"mcs_activityid\"] = item[\"Attributes\"].mcs_activityid;      \r\n            obj[\"Custname\"] = item[\"Attributes\"].mcs_name; \r\n            obj[\"mcs_thisfollowupcontent\"] = item[\"Attributes\"].mcs_thisfollowupcontent;     \r\n            obj[\"mcs_activitystatus\"] = this.optionset.GetOptionSetNameByValue(\"mcs_activitystatus\", item[\"Attributes\"].mcs_activitystatus);\r\n            obj[\"mcs_importantlevel\"] = this.optionset.GetOptionSetNameByValue(\"mcs_importantlevel\", item[\"Attributes\"].mcs_importantlevel);\r\n            obj[\"mcs_name\"] = item[\"Attributes\"].a_x002e_mcs_name;\r\n            obj[\"mcs_mobilephone\"] = item[\"Attributes\"].a_x002e_mcs_mobilephone;\r\n          \r\n            this.model.datalist.push(obj);\r\n\r\n          });\r\n          //设置数据存储到本地\r\n          if (this.model.page == 1) {\r\n            this.httpService.SetDataCache(this.model.name, JSON.stringify(this.model.datalist).toString());\r\n          }\r\n          event ? event.target.complete() : '';\r\n          //判断是否有新数据\r\n          this.model.searchnodata = res.Results.length==0;\r\n          if (res.Results.length < this.model.pageSize) {\r\n             if(this.model.page>1){\r\n              this.infiniteScroll.disabled = true;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          this._page.alert(\"消息提示\", \"数据加载异常\");\r\n        }\r\n        this.infiniteScroll.complete();\r\n        this._page.loadingHide();\r\n      },\r\n      (err: any) => {\r\n        this._page.alert(\"消息提示\", \"数据加载异常\");\r\n        this.infiniteScroll.complete();\r\n        this._page.loadingHide();\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n    //任务完成\r\n  TaskFinish(id){\r\n \r\n    this._page.confirm(\"确认提示\", \"确定完成该任务？\",()=>{\r\n        \r\n      this.UpdateState(id);\r\n    \r\n    });\r\n    \r\n  }\r\n\r\n\r\nUpdateState(id){\r\n  //debugger;\r\n  var postData = {};\r\n  postData[\"id\"] = id;\r\n  postData[\"mcs_activitystatus\"] = 1; //已完成\r\n  postData[\"mcs_endtime\"] = new Date();\r\n  \r\n  this._page.loadingShow();\r\n  this._http.post(\r\n    this.model.addoreditUrl,\r\n    postData,\r\n    (res: any) => {\r\n      this._page.loadingHide();\r\n      console.log(res);\r\n      if (res.Result == true) {\r\n        const that = this;\r\n        this._page.alert(\"消息提示\", \"操作成功\",  ()=> {\r\n          this.doRefresh(null);\r\n        });\r\n      }\r\n      else {\r\n        this._page.alert(\"消息提示\", \"操作失败\");\r\n      }\r\n    },\r\n    (err: any) => {\r\n      this._page.loadingHide();\r\n      this._page.alert(\"消息提示\", \"操作失败\");\r\n    }\r\n  );\r\n}\r\n\r\n\r\n}\r\n\r\n"],"sourceRoot":""}