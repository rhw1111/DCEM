{"version":3,"sources":["./src/app/saleing/mcs-account.com/list/list.page.html","./src/app/saleing/mcs-account.com/list/list.module.ts","./src/app/saleing/mcs-account.com/list/list.page.scss","./src/app/saleing/mcs-account.com/list/list.page.ts"],"names":[],"mappings":"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","file":"saleing-mcs-account-com-list-list-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button text=\\\"返回\\\" defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>销售机会列表</ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-searchbar animated [(ngModel)]=\\\"model.params.SearchKey\\\" placeholder=\\\"请输入编号\\\\姓名\\\\手机号搜索\\\"\\n      (keyup)=\\\"searchOnKeyup($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-segment>\\n      <ion-segment-button checked (click)=\\\"tagOnClick(0)\\\">\\n        <ion-label>全部</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button (click)=\\\"tagOnClick(1)\\\">\\n        <ion-label>待指派</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button (click)=\\\"tagOnClick(2)\\\">\\n        <ion-label>已指派</ion-label>\\n      </ion-segment-button>\\n    </ion-segment>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n\\n  <ion-list lines=\\\"full\\\">\\n    <ion-item-sliding *ngFor=\\\"let item of model.data;let key=index\\\">\\n      <ion-item [routerLink]=\\\"['/saleing/account/detail']\\\" [queryParams]=\\\"{id:item.Id}\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"contact\\\" size=\\\"large\\\"></ion-icon>\\n        <ion-label>\\n          <h2>{{item.name}}</h2>\\n          <p>{{item.accountnumber}}</p>\\n          <p>\\n            <ion-icon *ngIf=\\\"item.mcs_mobilephone\\\" name=\\\"phone-portrait\\\" size=\\\"small\\\"></ion-icon>\\n            {{item.mcs_mobilephone}}\\n          </p>\\n        </ion-label>\\n        <ion-note slot=\\\"end\\\">\\n          {{item.mcs_customerstatus}}\\n        </ion-note>\\n      </ion-item>\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option color=\\\"tertiary\\\" [routerLink]=\\\"['/saleing/logcall/edit']\\\" [queryParams]=\\\"{id:item.Id}\\\">\\n          +联络\\n        </ion-item-option>\\n        <ion-item-option color=\\\"warning\\\" [routerLink]=\\\"['/saleing/activity/edit']\\\" [queryParams]=\\\"{id:item.Id}\\\">\\n          +培育\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n  </ion-list>\\n  <ion-label *ngIf=\\\"ionInfiniteScroll.disabled\\\" text-center>\\n    <p>\\n      没有更多的记录显示啦\\n    </p>\\n  </ion-label>\\n  <ion-infinite-scroll (ionInfinite)=\\\"doInfinite()\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button>\\n      <ion-icon name=\\\"arrow-dropup\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-list side=\\\"top\\\">\\n      <ion-fab-button  title=\\\"成交\\\" color=\\\"success\\\">\\n          +试驾\\n        <ion-icon name=\\\"add\\\"></ion-icon>\\n      </ion-fab-button>\\n      <ion-fab-button color=\\\"warning\\\" [routerLink]=\\\"['/saleing/account/edit']\\\">\\n        <ion-icon name=\\\"add\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ion-fab-list>\\n  </ion-fab>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NhbGVpbmcvbWNzLWFjY291bnQuY29tL2xpc3QvbGlzdC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { IonContent, IonInfiniteScroll } from '@ionic/angular';\r\nimport { DCore_Http, DCore_Page } from 'app/base/base.ser/Dcem.core';\r\nimport { OptionSetService } from '../../saleing.ser/optionset.service';\r\n\r\n@Component({\r\n    selector: 'app-list',\r\n    templateUrl: './list.page.html',\r\n    styleUrls: ['./list.page.scss'],\r\n})\r\nexport class ListPage implements OnInit {\r\n\r\n    @ViewChild(IonContent, null) ionContent: IonContent;\r\n    @ViewChild(IonInfiniteScroll, null) ionInfiniteScroll: IonInfiniteScroll;\r\n\r\n    public model: any = {\r\n        apiUrl: '/api/account/GetList',//请求地址\r\n        data: [],//列表数据\r\n        params: {\r\n            SearchKey: '',//搜索关键字\r\n            mcs_customerstatus: -1,//状态\r\n            PageSize: 10,//页数\r\n            PageIndex: 1,//分页\r\n            Sort: '',//排序的参数\r\n            UserId: \"\",\r\n            mcs_dealerid: \"\"\r\n        }\r\n    };\r\n    constructor(private _http: DCore_Http,\r\n        private _page: DCore_Page,\r\n        private optionset:OptionSetService) { }\r\n\r\n    ngOnInit() {\r\n       \r\n    }\r\n    \r\n    //每次页面加载\r\n    ionViewWillEnter() {\r\n        this.ionInfiniteScroll.disabled = false;\r\n        this.model.params.PageIndex = 1;\r\n        this.listOnBind();\r\n    }\r\n\r\n    ///搜索\r\n    searchOnKeyup(event: any) {\r\n        var keyCode = event ? event.keyCode : \"\";\r\n        if (keyCode == 13) {\r\n            this.model.data = [];\r\n            this.model.params.PageIndex = 1;\r\n            this.ionInfiniteScroll.disabled = false;\r\n            this.ionContent.scrollToTop(0);\r\n            this.listOnBind();\r\n        }\r\n    }\r\n     //下拉刷新\r\n     doInfinite() {\r\n        this.model.params.PageIndex += 1;\r\n        this.listOnBind();\r\n    }\r\n    //切换tab\r\n    tagOnClick(status){\r\n        this.model.data=[];\r\n        this.model.params.PageIndex = 1;\r\n        this.model.params.mcs_customerstatus=status;\r\n        this.ionInfiniteScroll.disabled = false;\r\n        this.ionContent.scrollToTop(0);\r\n        this.listOnBind();\r\n    }\r\n\r\n    //列表数据绑定\r\n    listOnBind() {\r\n        this._page.loadingShow();\r\n        this._http.post(this.model.apiUrl, this.model.params,\r\n            (res: any) => {\r\n                if (res.Results !== null) {\r\n                    //绑定数据\r\n                    if(res.Results.length>0){\r\n                        res.Results.forEach(item => {\r\n                            var value = item[\"Attributes\"];\r\n                            this.model.data.push({\r\n                                \"Id\": value.accountid,\r\n                                \"name\": value.name,\r\n                                \"accountnumber\": value.accountnumber,\r\n                                \"mcs_mobilephone\": value.mcs_mobilephone,\r\n                                \"mcs_customerstatus\":this.optionset.GetOptionSetNameByValue(\"mcs_customerstatus\",value.mcs_customerstatus),\r\n                                \"createdon\": value.createdon\r\n                            });\r\n                        });\r\n                    }\r\n                    this.ionInfiniteScroll.complete();\r\n                    //判断是否有新数据\r\n                    if (res.Results.length < this.model.params.PageSize) {\r\n                        this.ionInfiniteScroll.disabled = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._page.alert(\"消息提示\", \"数据加载异常\");\r\n                }\r\n                this._page.loadingHide();\r\n            },\r\n            (err: any) => {\r\n                this._page.alert(\"消息提示\", \"数据加载异常\");\r\n                this._page.loadingHide();\r\n            }\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}