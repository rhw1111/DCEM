{"version":3,"sources":["./src/app/saleing/mcs-contactrecord/edit/edit.page.html","./src/app/saleing/mcs-contactrecord/edit/edit.module.ts","./src/app/saleing/mcs-contactrecord/edit/edit.page.scss","./src/app/saleing/mcs-contactrecord/edit/edit.page.ts"],"names":[],"mappings":"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","file":"saleing-mcs-contactrecord-edit-edit-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-back-button text=\\\"返回\\\" defaultHref=\\\"/saleing/onlylead/detail\\\" ></ion-back-button>\\r\\n     </ion-buttons>\\r\\n    <ion-title>创建或编辑logcall</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n    <ion-list lines=\\\"full\\\">    \\r\\n        <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">\\r\\n                回访时间\\r\\n                <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n            </ion-label>\\r\\n            <ion-datetime placeholder=\\\"请选择到店时间\\\" display-format=\\\"YYYY-MM-DD HH:mm\\\"  [(ngModel)]=\\\"model.postData.mcs_visittime\\\" required></ion-datetime>\\r\\n        </ion-item>\\r\\n        <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">\\r\\n                回访内容\\r\\n                <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n            </ion-label>\\r\\n            <ion-textarea placeholder=\\\"请输入回访内容\\\" [(ngModel)]=\\\"model.postData.mcs_content\\\" required></ion-textarea>\\r\\n        </ion-item>\\r\\n        <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">\\r\\n                回访结果\\r\\n                <ion-text color=\\\"danger\\\">*</ion-text>\\r\\n            </ion-label>\\r\\n            <ion-textarea placeholder=\\\"请输入回访结果\\\" [(ngModel)]=\\\"model.postData.mcs_results\\\" required></ion-textarea>\\r\\n        </ion-item>\\r\\n        \\r\\n    </ion-list>\\r\\n    <section style=\\\"text-align:center;\\\">\\r\\n      <ion-button  expand=\\\"block\\\" type=\\\"button\\\"  (click)=\\\"saveLogcall()\\\">保存</ion-button>\\r\\n    </section>\\r\\n    <br />\\r\\n    <br />\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditPage } from './edit.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [EditPage]\n})\nexport class EditPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NhbGVpbmcvbWNzLWNvbnRhY3RyZWNvcmQvZWRpdC9lZGl0LnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { DCore_Http, DCore_Page, DCore_ShareData, DCore_Valid } from 'app/base/base.ser/Dcem.core';\r\nimport { ActivatedRoute, Params, Router } from '@angular/router';\r\nimport { Storage_LoginInfo } from 'app/base/base.ser/logininfo.storage';\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit.page.html',\r\n  styleUrls: ['./edit.page.scss'],\r\n})\r\nexport class EditPage implements OnInit {\r\n\r\n  model={\r\n  postApiUrl:'/api/only-lead/AddOrEditLogcall',\r\n  detailApiUrl:'/api/only-lead/GetLogCallById',\r\n\r\n  postData:{\r\n    mcs_content:\"\",\r\n    mcs_results:\"\",\r\n    mcs_visittime:null,\r\n    systemUserId: \"\",//当前用户id\r\n    mcs_logcallid:\"\",\r\n    entityid:\"\"  //唯一线索ID\r\n  }\r\n}\r\n  constructor(\r\n    private _http: DCore_Http,\r\n    private _page: DCore_Page,\r\n    private _valid: DCore_Valid,\r\n    private activeRoute: ActivatedRoute,\r\n    private _logininfo: Storage_LoginInfo\r\n\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n\r\n    this.activeRoute.queryParams.subscribe((params: Params) => {\r\n\r\n      this.model.postData.systemUserId = this._logininfo.GetSystemUserId(); \r\n      if (params['id'] != null && params['id'] != undefined) {  //唯一线索主键id\r\n\r\n          this.model.postData.entityid = params['id'];         \r\n      }\r\n      if (params['mcslogcallid'] != null && params['mcslogcallid'] != undefined) {  //联络任务 主键id\r\n\r\n        this.model.postData.mcs_logcallid = params['mcslogcallid'];\r\n        this.pageOnBind(params['mcslogcallid']);  \r\n    }\r\n\r\n   });\r\n  \r\n  }\r\n   \r\n//根据主键加载联络记录(logcall)\r\npageOnBind(id: any) {\r\n   debugger;\r\n  this._page.loadingShow();\r\n  this._http.get(\r\n      this.model.detailApiUrl,\r\n      {\r\n          params: {\r\n             mcs_logcallid: id,            \r\n             systemuserid: this.model.postData.systemUserId,\r\n          }\r\n      },\r\n      (res: any) => {\r\n          debugger;\r\n          if (res !== null) {\r\n              if (res.Results !== null) {                                   \r\n                      this.model.postData.mcs_content = res.Results[0][\"Attributes\"][\"mcs_content\"];\r\n                      this.model.postData.mcs_visittime = res.Results[0][\"Attributes\"][\"mcs_visittime\"];\r\n                      this.model.postData.mcs_results = res.Results[0][\"Attributes\"][\"mcs_results\"];                      \r\n                      this.model.postData.entityid = res.Results[0][\"Attributes\"][\"_mcs_onlyleadid_value\"];                                  \r\n              }\r\n              else{\r\n                this._page.alert(\"消息提示\", \"数据加载异常\");\r\n\r\n              }     \r\n          }\r\n          else {\r\n              this._page.alert(\"消息提示\", \"数据加载异常\");\r\n          }\r\n\r\n          this._page.loadingHide();\r\n      },\r\n      (err: any) => {\r\n          this._page.alert(\"消息提示\", \"数据加载异常\");\r\n          this._page.loadingHide();\r\n      }\r\n  );\r\n\r\n}\r\n\r\n\r\n   public saveLogcall(){\r\n\r\n     var errMessage = \"\";\r\n      if (this._valid.isNullOrEmpty(this.model.postData.mcs_content)) {\r\n      errMessage += \"请输入回访内容<br>\";\r\n      }\r\n      if (this._valid.isNullOrEmpty(this.model.postData.mcs_results)) {\r\n          errMessage += \"请输入回访结果<br>\";\r\n      }\r\n      if (this._valid.isNullOrEmpty(this.model.postData.mcs_visittime)) {\r\n          errMessage += \"请选择回访时间<br>\";\r\n      }\r\n       \r\n      if (errMessage !== \"\") {\r\n        this._page.presentToastError(errMessage);\r\n        return;\r\n      }\r\n\r\n      this._page.loadingShow();\r\n      this._http.post(\r\n          this.model.postApiUrl, this.model.postData,\r\n          (res: any) => {\r\n              debugger;\r\n              this._page.loadingHide();\r\n              if (res.Result == true) {              \r\n                  console.log(res);              \r\n                  //this._shareData.delete(this.mod.shareDataKey);\r\n                  this._page.goto(\"/saleing/onlylead/detail\", {id: this.model.postData.entityid });\r\n              }\r\n              else {\r\n                  this._page.alert(\"消息提示\", res.Description);\r\n              }\r\n          },\r\n          (err: any) => {\r\n              this._page.loadingHide();\r\n              this._page.alert(\"消息提示\", \"操作失败\");\r\n          }\r\n      );\r\n\r\n   }\r\n\r\n}\r\n"],"sourceRoot":""}